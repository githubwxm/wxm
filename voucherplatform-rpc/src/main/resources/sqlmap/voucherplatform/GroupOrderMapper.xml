<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.all580.voucherplatform.dao.GroupOrderMapper">
    <resultMap id="BaseResultMap" type="com.all580.voucherplatform.entity.GroupOrder">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Wed Jun 21 10:57:26 CST 2017.
        -->
        <id column="id" jdbcType="INTEGER" property="id"/>
        <result column="orderCode" jdbcType="VARCHAR" property="orderCode"/>
        <result column="platform_id" jdbcType="INTEGER" property="platform_id"/>
        <result column="supply_id" jdbcType="INTEGER" property="supply_id"/>
        <result column="ticketsys_id" jdbcType="INTEGER" property="ticketsys_id"/>
        <result column="platformOrderId" jdbcType="VARCHAR" property="platformOrderId"/>
        <result column="platformProdId" jdbcType="INTEGER" property="platformProdId"/>
        <result column="supplyOrderId" jdbcType="VARCHAR" property="supplyOrderId"/>
        <result column="supplyProdId" jdbcType="INTEGER" property="supplyProdId"/>
        <result column="formAreaCode" jdbcType="VARCHAR" property="formAreaCode"/>
        <result column="formAddr" jdbcType="VARCHAR" property="formAddr"/>
        <result column="travelName" jdbcType="VARCHAR" property="travelName"/>
        <result column="manager" jdbcType="VARCHAR" property="manager"/>
        <result column="groupNumber" jdbcType="VARCHAR" property="groupNumber"/>
        <result column="guideName" jdbcType="VARCHAR" property="guideName"/>
        <result column="guideIdNumber" jdbcType="VARCHAR" property="guideIdNumber"/>
        <result column="guideMobile" jdbcType="VARCHAR" property="guideMobile"/>
        <result column="payment" jdbcType="INTEGER" property="payment"/>
        <result column="payTime" jdbcType="TIMESTAMP" property="payTime"/>
        <result column="sendType" jdbcType="INTEGER" property="sendType"/>
        <result column="validTime" jdbcType="TIMESTAMP" property="validTime"/>
        <result column="invalidTime" jdbcType="TIMESTAMP" property="invalidTime"/>
        <result column="activateNum" jdbcType="INTEGER" property="activateNum"/>
        <result column="activateStatus" jdbcType="BIT" property="activateStatus"/>
        <result column="price" jdbcType="DECIMAL" property="price"/>
        <result column="number" jdbcType="INTEGER" property="number"/>
        <result column="createTime" jdbcType="TIMESTAMP" property="createTime"/>
        <result column="voucherNumber" jdbcType="VARCHAR" property="voucherNumber"/>
        <result column="imgUrl" jdbcType="VARCHAR" property="imgUrl"/>
        <result column="longUrl" jdbcType="VARCHAR" property="longUrl"/>
        <result column="status" jdbcType="INTEGER" property="status"/>
        <result column="totalNumber" jdbcType="INTEGER" property="totalNumber"/>
    </resultMap>
    <sql id="Base_Column_List">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Wed Jun 21 10:57:26 CST 2017.
        -->
        `id`, `orderCode`, `platform_id`, `supply_id`, `ticketsys_id`, `platformOrderId`,
        `platformProdId`, `supplyOrderId`, `supplyProdId`, `formAreaCode`, `formAddr`, `travelName`,
        `manager`, `groupNumber`, `guideName`, `guideIdNumber`, `guideMobile`, `payment`,
        `payTime`, `sendType`, `validTime`, `invalidTime`, `activateNum`, `activateStatus`,
        `price`, `number`, `createTime`, `voucherNumber`, `imgUrl`, `status`,`totalNumber`
    </sql>
    <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Wed Jun 21 10:57:26 CST 2017.
        -->
        select
        <include refid="Base_Column_List"/>
        from t_group_order
        where `id` = #{id,jdbcType=INTEGER}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Wed Jun 21 10:57:26 CST 2017.
        -->
        delete from t_group_order
        where `id` = #{id,jdbcType=INTEGER}
    </delete>
    <insert id="insert" parameterType="com.all580.voucherplatform.entity.GroupOrder">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Wed Jun 21 10:57:26 CST 2017.
        -->
        <selectKey keyProperty="id" order="AFTER" resultType="java.lang.Integer">
            SELECT LAST_INSERT_ID()
        </selectKey>
        insert into t_group_order (`orderCode`, `platform_id`, `supply_id`,
        `ticketsys_id`, `platformOrderId`, `platformProdId`,
        `supplyOrderId`, `supplyProdId`, `formAreaCode`,
        `formAddr`, `travelName`, `manager`,
        `groupNumber`, `guideName`, `guideIdNumber`,
        `guideMobile`, `payment`, `payTime`,
        `sendType`, `validTime`, `invalidTime`,
        `activateNum`, `activateStatus`, `price`,
        `number`, `createTime`, `voucherNumber`,
        `imgUrl`,`longUrl`, `status`)
        values (#{orderCode,jdbcType=VARCHAR}, #{platform_id,jdbcType=INTEGER}, #{supply_id,jdbcType=INTEGER},
        #{ticketsys_id,jdbcType=INTEGER}, #{platformOrderId,jdbcType=VARCHAR}, #{platformProdId,jdbcType=INTEGER},
        #{supplyOrderId,jdbcType=VARCHAR}, #{supplyProdId,jdbcType=INTEGER}, #{formAreaCode,jdbcType=VARCHAR},
        #{formAddr,jdbcType=VARCHAR}, #{travelName,jdbcType=VARCHAR}, #{manager,jdbcType=VARCHAR},
        #{groupNumber,jdbcType=VARCHAR}, #{guideName,jdbcType=VARCHAR}, #{guideIdNumber,jdbcType=VARCHAR},
        #{guideMobile,jdbcType=VARCHAR}, #{payment,jdbcType=INTEGER}, #{payTime,jdbcType=TIMESTAMP},
        #{sendType,jdbcType=INTEGER}, #{validTime,jdbcType=TIMESTAMP}, #{invalidTime,jdbcType=TIMESTAMP},
        #{activateNum,jdbcType=INTEGER}, #{activateStatus,jdbcType=BIT}, #{price,jdbcType=DECIMAL},
        #{number,jdbcType=INTEGER}, #{createTime,jdbcType=TIMESTAMP}, #{voucherNumber,jdbcType=VARCHAR},
        #{imgUrl,jdbcType=VARCHAR}, #{longUrl,jdbcType=VARCHAR}, #{status,jdbcType=INTEGER})
    </insert>
    <insert id="insertSelective" parameterType="com.all580.voucherplatform.entity.GroupOrder">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Wed Jun 21 10:57:26 CST 2017.
        -->
        <selectKey keyProperty="id" order="AFTER" resultType="java.lang.Integer">
            SELECT LAST_INSERT_ID()
        </selectKey>
        insert into t_group_order
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="orderCode != null">
                `orderCode`,
            </if>
            <if test="platform_id != null">
                `platform_id`,
            </if>
            <if test="supply_id != null">
                `supply_id`,
            </if>
            <if test="ticketsys_id != null">
                `ticketsys_id`,
            </if>
            <if test="platformOrderId != null">
                `platformOrderId`,
            </if>
            <if test="platformProdId != null">
                `platformProdId`,
            </if>
            <if test="supplyOrderId != null">
                `supplyOrderId`,
            </if>
            <if test="supplyProdId != null">
                `supplyProdId`,
            </if>
            <if test="formAreaCode != null">
                `formAreaCode`,
            </if>
            <if test="formAddr != null">
                `formAddr`,
            </if>
            <if test="travelName != null">
                `travelName`,
            </if>
            <if test="manager != null">
                `manager`,
            </if>
            <if test="groupNumber != null">
                `groupNumber`,
            </if>
            <if test="guideName != null">
                `guideName`,
            </if>
            <if test="guideIdNumber != null">
                `guideIdNumber`,
            </if>
            <if test="guideMobile != null">
                `guideMobile`,
            </if>
            <if test="payment != null">
                `payment`,
            </if>
            <if test="payTime != null">
                `payTime`,
            </if>
            <if test="sendType != null">
                `sendType`,
            </if>
            <if test="validTime != null">
                `validTime`,
            </if>
            <if test="invalidTime != null">
                `invalidTime`,
            </if>
            <if test="activateNum != null">
                `activateNum`,
            </if>
            <if test="activateStatus != null">
                `activateStatus`,
            </if>
            <if test="price != null">
                `price`,
            </if>
            <if test="number != null">
                `number`,
            </if>
            <if test="createTime != null">
                `createTime`,
            </if>
            <if test="voucherNumber != null">
                `voucherNumber`,
            </if>
            <if test="imgUrl != null">
                `imgUrl`,
            </if>
            <if test="longUrl != null">
                `longUrl`,
            </if>
            <if test="status != null">
                `status`,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="orderCode != null">
                #{orderCode,jdbcType=VARCHAR},
            </if>
            <if test="platform_id != null">
                #{platform_id,jdbcType=INTEGER},
            </if>
            <if test="supply_id != null">
                #{supply_id,jdbcType=INTEGER},
            </if>
            <if test="ticketsys_id != null">
                #{ticketsys_id,jdbcType=INTEGER},
            </if>
            <if test="platformOrderId != null">
                #{platformOrderId,jdbcType=VARCHAR},
            </if>
            <if test="platformProdId != null">
                #{platformProdId,jdbcType=INTEGER},
            </if>
            <if test="supplyOrderId != null">
                #{supplyOrderId,jdbcType=VARCHAR},
            </if>
            <if test="supplyProdId != null">
                #{supplyProdId,jdbcType=INTEGER},
            </if>
            <if test="formAreaCode != null">
                #{formAreaCode,jdbcType=VARCHAR},
            </if>
            <if test="formAddr != null">
                #{formAddr,jdbcType=VARCHAR},
            </if>
            <if test="travelName != null">
                #{travelName,jdbcType=VARCHAR},
            </if>
            <if test="manager != null">
                #{manager,jdbcType=VARCHAR},
            </if>
            <if test="groupNumber != null">
                #{groupNumber,jdbcType=VARCHAR},
            </if>
            <if test="guideName != null">
                #{guideName,jdbcType=VARCHAR},
            </if>
            <if test="guideIdNumber != null">
                #{guideIdNumber,jdbcType=VARCHAR},
            </if>
            <if test="guideMobile != null">
                #{guideMobile,jdbcType=VARCHAR},
            </if>
            <if test="payment != null">
                #{payment,jdbcType=INTEGER},
            </if>
            <if test="payTime != null">
                #{payTime,jdbcType=TIMESTAMP},
            </if>
            <if test="sendType != null">
                #{sendType,jdbcType=INTEGER},
            </if>
            <if test="validTime != null">
                #{validTime,jdbcType=TIMESTAMP},
            </if>
            <if test="invalidTime != null">
                #{invalidTime,jdbcType=TIMESTAMP},
            </if>
            <if test="activateNum != null">
                #{activateNum,jdbcType=INTEGER},
            </if>
            <if test="activateStatus != null">
                #{activateStatus,jdbcType=BIT},
            </if>
            <if test="price != null">
                #{price,jdbcType=DECIMAL},
            </if>
            <if test="number != null">
                #{number,jdbcType=INTEGER},
            </if>
            <if test="createTime != null">
                #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="voucherNumber != null">
                #{voucherNumber,jdbcType=VARCHAR},
            </if>
            <if test="imgUrl != null">
                #{imgUrl,jdbcType=VARCHAR},
            </if>
            <if test="longUrl != null">
                #{longUrl,jdbcType=VARCHAR},
            </if>
            <if test="status != null">
                #{status,jdbcType=INTEGER},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="com.all580.voucherplatform.entity.GroupOrder">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Wed Jun 21 10:57:26 CST 2017.
        -->
        update t_group_order
        <set>
            <if test="orderCode != null">
                `orderCode` = #{orderCode,jdbcType=VARCHAR},
            </if>
            <if test="platform_id != null">
                `platform_id` = #{platform_id,jdbcType=INTEGER},
            </if>
            <if test="supply_id != null">
                `supply_id` = #{supply_id,jdbcType=INTEGER},
            </if>
            <if test="ticketsys_id != null">
                `ticketsys_id` = #{ticketsys_id,jdbcType=INTEGER},
            </if>
            <if test="platformOrderId != null">
                `platformOrderId` = #{platformOrderId,jdbcType=VARCHAR},
            </if>
            <if test="platformProdId != null">
                `platformProdId` = #{platformProdId,jdbcType=INTEGER},
            </if>
            <if test="supplyOrderId != null">
                `supplyOrderId` = #{supplyOrderId,jdbcType=VARCHAR},
            </if>
            <if test="supplyProdId != null">
                `supplyProdId` = #{supplyProdId,jdbcType=INTEGER},
            </if>
            <if test="formAreaCode != null">
                `formAreaCode` = #{formAreaCode,jdbcType=VARCHAR},
            </if>
            <if test="formAddr != null">
                `formAddr` = #{formAddr,jdbcType=VARCHAR},
            </if>
            <if test="travelName != null">
                `travelName` = #{travelName,jdbcType=VARCHAR},
            </if>
            <if test="manager != null">
                `manager` = #{manager,jdbcType=VARCHAR},
            </if>
            <if test="groupNumber != null">
                `groupNumber` = #{groupNumber,jdbcType=VARCHAR},
            </if>
            <if test="guideName != null">
                `guideName` = #{guideName,jdbcType=VARCHAR},
            </if>
            <if test="guideIdNumber != null">
                `guideIdNumber` = #{guideIdNumber,jdbcType=VARCHAR},
            </if>
            <if test="guideMobile != null">
                `guideMobile` = #{guideMobile,jdbcType=VARCHAR},
            </if>
            <if test="payment != null">
                `payment` = #{payment,jdbcType=INTEGER},
            </if>
            <if test="payTime != null">
                `payTime` = #{payTime,jdbcType=TIMESTAMP},
            </if>
            <if test="sendType != null">
                `sendType` = #{sendType,jdbcType=INTEGER},
            </if>
            <if test="validTime != null">
                `validTime` = #{validTime,jdbcType=TIMESTAMP},
            </if>
            <if test="invalidTime != null">
                `invalidTime` = #{invalidTime,jdbcType=TIMESTAMP},
            </if>
            <if test="activateNum != null">
                `activateNum` = #{activateNum,jdbcType=INTEGER},
            </if>
            <if test="activateStatus != null">
                `activateStatus` = #{activateStatus,jdbcType=BIT},
            </if>
            <if test="price != null">
                `price` = #{price,jdbcType=DECIMAL},
            </if>
            <if test="number != null">
                `number` = #{number,jdbcType=INTEGER},
            </if>
            <if test="createTime != null">
                `createTime` = #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="voucherNumber != null">
                `voucherNumber` = #{voucherNumber,jdbcType=VARCHAR},
            </if>
            <if test="imgUrl != null">
                `imgUrl` = #{imgUrl,jdbcType=VARCHAR},
            </if>
            <if test="status != null">
                `status` = #{status,jdbcType=INTEGER},
            </if>
            <if test="totalNumber != null">
                `totalNumber` = #{totalNumber,jdbcType=INTEGER},
            </if>
        </set>
        where `id` = #{id,jdbcType=INTEGER}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.all580.voucherplatform.entity.GroupOrder">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Wed Jun 21 10:57:26 CST 2017.
        -->
        update t_group_order
        set `orderCode` = #{orderCode,jdbcType=VARCHAR},
        `platform_id` = #{platform_id,jdbcType=INTEGER},
        `supply_id` = #{supply_id,jdbcType=INTEGER},
        `ticketsys_id` = #{ticketsys_id,jdbcType=INTEGER},
        `platformOrderId` = #{platformOrderId,jdbcType=VARCHAR},
        `platformProdId` = #{platformProdId,jdbcType=INTEGER},
        `supplyOrderId` = #{supplyOrderId,jdbcType=VARCHAR},
        `supplyProdId` = #{supplyProdId,jdbcType=INTEGER},
        `formAreaCode` = #{formAreaCode,jdbcType=VARCHAR},
        `formAddr` = #{formAddr,jdbcType=VARCHAR},
        `travelName` = #{travelName,jdbcType=VARCHAR},
        `manager` = #{manager,jdbcType=VARCHAR},
        `groupNumber` = #{groupNumber,jdbcType=VARCHAR},
        `guideName` = #{guideName,jdbcType=VARCHAR},
        `guideIdNumber` = #{guideIdNumber,jdbcType=VARCHAR},
        `guideMobile` = #{guideMobile,jdbcType=VARCHAR},
        `payment` = #{payment,jdbcType=INTEGER},
        `payTime` = #{payTime,jdbcType=TIMESTAMP},
        `sendType` = #{sendType,jdbcType=INTEGER},
        `validTime` = #{validTime,jdbcType=TIMESTAMP},
        `invalidTime` = #{invalidTime,jdbcType=TIMESTAMP},
        `activateNum` = #{activateNum,jdbcType=INTEGER},
        `activateStatus` = #{activateStatus,jdbcType=BIT},
        `price` = #{price,jdbcType=DECIMAL},
        `number` = #{number,jdbcType=INTEGER},
        `createTime` = #{createTime,jdbcType=TIMESTAMP},
        `voucherNumber` = #{voucherNumber,jdbcType=VARCHAR},
        `imgUrl` = #{imgUrl,jdbcType=VARCHAR},
        `status` = #{status,jdbcType=INTEGER}
        where `id` = #{id,jdbcType=INTEGER}
    </update>

    <select id="selectByOrderCode" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from t_group_order
        where `orderCode`=#{orderCode}
    </select>
    <select id="selectOrderCount" resultType="java.lang.Integer">
        SELECT COUNT(0)
        from t_group_order
        where 1=1
        <if test="platform_Id!=null">
            and `t_group_order`.`platform_id`=#{platform_Id}
        </if>
        <if test="supply_Id!=null">
            and `t_group_order`.`supply_id`=#{supply_Id}
        </if>
        <if test="order_Code!=null and order_Code!=''">
            and `t_group_order`.`orderCode`=#{order_Code}
        </if>
        <if test="platform_OrderId!=null and platform_OrderId!=''">
            and `t_group_order`.`platformOrderId`=#{platform_OrderId}
        </if>
        <if test="mobile!=null and mobile!=''">
            and `t_group_order`.`guideMobile`=#{mobile}
        </if>
        <if test="idNumber!=null and idNumber!=''">
            and `t_group_order`.`guideIdNumber`=#{idNumber}
        </if>
        <if test="voucherNumber!=null and voucherNumber!=''">
            and `voucherNumber`=#{voucherNumber}
        </if>
        <if test="status!=null">
            and `t_group_order`.`status`=#{status}
        </if>
        <if test="start_Time!=null">
            and `t_group_order`.`createTime`&gt;=#{start_Time}
        </if>
        <if test="end_Time!=null">
            <![CDATA[
       and  `t_group_order`.createTime<=#{end_Time}
        ]]>

        </if>
    </select>

    <select id="selectOrderList" resultType="java.util.Map">
        SELECT `t_group_order`.*,
        `t_platform`.`name` as `platform_name`,
        `t_platformproduct`.`name` as `platformprod_name`,
        `t_supply`.`name` as `supply_name`,
        `t_supplyproduct`.`name` as `supplyprod_name`
        from t_group_order
        JOIN `t_platform` on `t_platform`.`id`=`t_group_order`.`platform_id`
        JOIN `t_platformproduct` on `t_platformproduct`.`id`=`t_group_order`.`platformProdId`
        JOIN `t_supply` on `t_supply`.`id`=`t_group_order`.`supply_id`
        JOIN `t_supplyproduct` on `t_supplyproduct`.`id`=`t_group_order`.`supplyProdId`
        where 1=1
        <if test="platform_Id!=null">
            and `t_group_order`.`platform_id`=#{platform_Id}
        </if>
        <if test="supply_Id!=null">
            and `t_group_order`.`supply_id`=#{supply_Id}
        </if>
        <if test="order_Code!=null and order_Code!=''">
            and `t_group_order`.`orderCode`=#{order_Code}
        </if>
        <if test="platform_OrderId!=null and platform_OrderId!=''">
            and `t_group_order`.`platformOrderId`=#{platform_OrderId}
        </if>
        <if test="mobile!=null and mobile!=''">
            and `t_group_order`.`guideMobile`=#{mobile}
        </if>
        <if test="idNumber!=null and idNumber!=''">
            and `t_group_order`.`guideIdNumber`=#{idNumber}
        </if>
        <if test="voucherNumber!=null and voucherNumber!=''">
            and `voucherNumber`=#{voucherNumber}
        </if>
        <if test="status!=null">
            and `t_group_order`.`status`=#{status}
        </if>
        <if test="start_Time!=null">
            and `t_group_order`.`createTime`&gt;=#{start_Time}
        </if>
        <if test="end_Time!=null">
            <![CDATA[
       and  `t_group_order`.createTime<=#{end_Time}
        ]]>

        </if>
        order by `t_group_order`.`id` desc
        limit #{record_start},#{record_count}
    </select>
    <select id="selectByPlatform" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from t_group_order
        where `platform_id`=#{platform_Id}
        and `platformOrderId`=#{platform_OrderCode}
    </select>
</mapper>